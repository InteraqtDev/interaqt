{
  "analysis_metadata": {
    "timestamp": "2025-09-02 00:00:00",
    "methodology": "read-centric",
    "version": "1.0.0"
  },
  "root_read_requirements": [
    {
      "id": "R001",
      "type": "read", 
      "title": "View dormitory facilities and bed assignments",
      "goal": "G001",
      "role": "Administrator",
      "data": {
        "type": "view",
        "description": "List of all dormitories with their bed assignments and occupancy status"
      },
      "constraints": ["Only active dormitories should be displayed", "Include real-time occupancy information"]
    },
    {
      "id": "R002",
      "type": "read",
      "title": "View user behavior scores and disciplinary records", 
      "goal": "G002",
      "role": "Dormitory Leader",
      "data": {
        "type": "view",
        "description": "Behavior scores and disciplinary history for users in assigned dormitory"
      },
      "constraints": ["Only show data for users in leader's assigned dormitory", "Include score calculation details"]
    },
    {
      "id": "R003",
      "type": "read",
      "title": "View management hierarchy and role assignments",
      "goal": "G003", 
      "role": "Administrator",
      "data": {
        "type": "view",
        "description": "Current role assignments and management hierarchy structure"
      },
      "constraints": ["Show role assignment history", "Include permission levels for each role"]
    },
    {
      "id": "R004",
      "type": "read",
      "title": "View eviction requests and approval status",
      "goal": "G004",
      "role": "Administrator",
      "data": {
        "type": "view", 
        "description": "Pending and processed eviction requests with supporting documentation"
      },
      "constraints": ["Include behavior score justification", "Show request timeline and status"]
    }
  ],
  "derived_requirements": {
    "from_R001": [
      {
        "id": "R101",
        "type": "create",
        "title": "Create new dormitory",
        "parent": "R001",
        "role": "Administrator", 
        "data": {
          "type": "entity",
          "description": "New dormitory with specified number of beds"
        },
        "business_constraints": ["Must have between 4-6 beds as specified"],
        "data_constraints": ["Automatically create individual bed entities", "Set initial occupancy to 0"]
      },
      {
        "id": "R102", 
        "type": "update",
        "title": "Assign user to dormitory bed",
        "parent": "R001",
        "role": "Administrator",
        "data": {
          "type": "relation",
          "description": "User-to-bed assignment relationship"
        },
        "business_constraints": ["Each user can only be assigned to one bed", "Bed must be available"],
        "data_constraints": ["Update bed occupancy status", "Record assignment timestamp"]
      },
      {
        "id": "R103",
        "type": "delete",
        "title": "Remove user from dormitory assignment", 
        "parent": "R001",
        "role": "Administrator",
        "data": {
          "type": "relation",
          "description": "Remove user-to-bed assignment"
        },
        "business_constraints": ["Can only remove if eviction is approved or user requests transfer"],
        "data_constraints": ["Update bed availability status", "Archive assignment history"]
      }
    ],
    "from_R002": [
      {
        "id": "R201",
        "type": "create",
        "title": "Record behavior violation",
        "parent": "R002", 
        "role": "Dormitory Leader",
        "data": {
          "type": "entity",
          "description": "Behavior violation record with score deduction"
        },
        "business_constraints": ["Must specify violation type and evidence"],
        "data_constraints": ["Automatically calculate new total score", "Send notification to user"]
      },
      {
        "id": "R202",
        "type": "update", 
        "title": "Modify behavior score",
        "parent": "R002",
        "role": "Administrator",
        "data": {
          "type": "property",
          "description": "User's cumulative behavior score"
        },
        "business_constraints": ["Can only be modified by administrator for corrections"],
        "data_constraints": ["Log score modification reason", "Maintain score history"]
      }
    ],
    "from_R003": [
      {
        "id": "R301", 
        "type": "create",
        "title": "Assign dormitory leader role",
        "parent": "R003",
        "role": "Administrator",
        "data": {
          "type": "relation",
          "description": "User-to-dormitory leader role assignment"
        },
        "business_constraints": ["User must be resident of the dormitory", "Each dormitory can have only one leader"],
        "data_constraints": ["Remove previous leader assignment if exists", "Grant leader permissions"]
      },
      {
        "id": "R302",
        "type": "delete",
        "title": "Remove dormitory leader role", 
        "parent": "R003",
        "role": "Administrator", 
        "data": {
          "type": "relation",
          "description": "Remove leader role from user"
        },
        "business_constraints": ["Must assign new leader before removing current one"],
        "data_constraints": ["Revoke leader permissions", "Archive leadership history"]
      }
    ],
    "from_R004": [
      {
        "id": "R401",
        "type": "create",
        "title": "Submit eviction request",
        "parent": "R004",
        "role": "Dormitory Leader", 
        "data": {
          "type": "entity",
          "description": "Eviction request with justification and evidence"
        },
        "business_constraints": ["User's behavior score must be below threshold", "Must provide detailed justification"],
        "data_constraints": ["Include current behavior score", "Set request status to pending"]
      },
      {
        "id": "R402",
        "type": "update",
        "title": "Process eviction request",
        "parent": "R004", 
        "role": "Administrator",
        "data": {
          "type": "property",
          "description": "Eviction request approval status"
        },
        "business_constraints": ["Can approve or reject with reason"],
        "data_constraints": ["If approved, trigger user removal process", "Record decision timestamp and reason"]
      }
    ],
    "from_R101": [
      {
        "id": "R501",
        "type": "read",
        "title": "Validate dormitory creation parameters",
        "parent": "R101",
        "role": "Administrator", 
        "data": {
          "type": "aggregated",
          "description": "Current dormitory count and naming constraints"
        },
        "constraints": ["Check for duplicate dormitory names", "Verify capacity limits"]
      }
    ],
    "from_R102": [
      {
        "id": "R502",
        "type": "read",
        "title": "Check user assignment eligibility", 
        "parent": "R102",
        "role": "Administrator",
        "data": {
          "type": "entity",
          "description": "User's current assignment status and eligibility"
        },
        "constraints": ["User must not have existing assignment", "User must be active"]
      },
      {
        "id": "R503", 
        "type": "read",
        "title": "Verify bed availability",
        "parent": "R102",
        "role": "Administrator",
        "data": {
          "type": "entity",
          "description": "Target bed's current occupancy status"
        },
        "constraints": ["Bed must be unoccupied", "Bed must be in active dormitory"]
      }
    ],
    "from_R201": [
      {
        "id": "R504",
        "type": "read", 
        "title": "Get current user behavior score",
        "parent": "R201",
        "role": "Dormitory Leader",
        "data": {
          "type": "property",
          "description": "User's current behavior score before violation"
        },
        "constraints": ["User must be in leader's dormitory"]
      }
    ],
    "from_R401": [
      {
        "id": "R505",
        "type": "read",
        "title": "Validate eviction eligibility",
        "parent": "R401", 
        "role": "Dormitory Leader",
        "data": {
          "type": "aggregated",
          "description": "User's score and violation history for eviction threshold check"
        },
        "constraints": ["Score must be below eviction threshold", "Must have recent violation history"]
      }
    ]
  },
  "requirement_tree": {
    "R001": {
      "children": ["R101", "R102", "R103"],
      "depth": 0
    },
    "R002": {
      "children": ["R201", "R202"], 
      "depth": 0
    },
    "R003": {
      "children": ["R301", "R302"],
      "depth": 0
    },
    "R004": {
      "children": ["R401", "R402"],
      "depth": 0
    },
    "R101": {
      "children": ["R501"],
      "depth": 1
    },
    "R102": {
      "children": ["R502", "R503"],
      "depth": 1
    },
    "R201": {
      "children": ["R504"], 
      "depth": 1
    },
    "R401": {
      "children": ["R505"],
      "depth": 1
    },
    "R103": {
      "children": [],
      "depth": 1
    },
    "R202": {
      "children": [],
      "depth": 1
    },
    "R301": {
      "children": [],
      "depth": 1
    },
    "R302": {
      "children": [],
      "depth": 1
    },
    "R402": {
      "children": [],
      "depth": 1
    },
    "R501": {
      "children": [],
      "depth": 2
    }, 
    "R502": {
      "children": [],
      "depth": 2
    },
    "R503": {
      "children": [],
      "depth": 2
    },
    "R504": {
      "children": [],
      "depth": 2
    },
    "R505": {
      "children": [],
      "depth": 2
    }
  },
  "completeness_check": {
    "total_requirements": 21,
    "read_requirements": 9,
    "write_requirements": 12,
    "requirements_with_children": 6,
    "leaf_requirements": 15
  }
}