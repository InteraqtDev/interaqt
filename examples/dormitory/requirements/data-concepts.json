{
  "extraction_metadata": {
    "timestamp": "2025-09-02 00:00:00",
    "source_requirements": "requirements-analysis.json",
    "version": "1.0.0"
  },
  "dictionaries": [
    {
      "name": "SystemConfig",
      "description": "Global system configuration parameters",
      "keys": [
        {
          "key": "evictionScoreThreshold",
          "type": "number",
          "description": "Minimum behavior score required to avoid eviction eligibility"
        },
        {
          "key": "maxBedsPerDormitory",
          "type": "number", 
          "description": "Maximum number of beds allowed per dormitory"
        },
        {
          "key": "minBedsPerDormitory",
          "type": "number",
          "description": "Minimum number of beds required per dormitory"
        }
      ],
      "used_in_requirements": ["R501", "R505"]
    },
    {
      "name": "ViolationRules",
      "description": "Standard violation types and score deductions",
      "keys": [
        {
          "key": "noiseViolation",
          "type": "number",
          "description": "Score deduction for noise-related violations"
        },
        {
          "key": "cleanlinessViolation", 
          "type": "number",
          "description": "Score deduction for cleanliness violations"
        },
        {
          "key": "guestPolicyViolation",
          "type": "number",
          "description": "Score deduction for unauthorized guest violations"
        }
      ],
      "used_in_requirements": ["R201", "R504"]
    },
    {
      "name": "SystemStats",
      "description": "System-wide statistics and metrics",
      "keys": [
        {
          "key": "totalOccupiedBeds",
          "type": "number",
          "description": "Total number of occupied beds across all dormitories"
        },
        {
          "key": "totalAvailableBeds",
          "type": "number",
          "description": "Total number of available beds across all dormitories"
        },
        {
          "key": "activeDormitoriesCount",
          "type": "number",
          "description": "Number of active dormitories in the system"
        }
      ],
      "used_in_requirements": ["R001", "R501"]
    }
  ],
  "entities": [
    {
      "name": "User",
      "description": "System users including students, administrators, and dormitory leaders",
      "properties": [
        {
          "name": "name",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "email",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "role",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "status",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "behaviorScore",
          "type": "number",
          "required": true,
          "computed": true,
          "computation": {
            "method": "aggregation",
            "description": "Sum of all behavior violation score deductions from base score",
            "dependencies": ["BehaviorViolation"]
          }
        },
        {
          "name": "phoneNumber",
          "type": "string",
          "required": false,
          "computed": false
        }
      ],
      "referenced_in": ["R001", "R002", "R003", "R102", "R201", "R301", "R401", "R502", "R504", "R505"]
    },
    {
      "name": "Dormitory",
      "description": "Physical dormitory buildings or units",
      "properties": [
        {
          "name": "name",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "location",
          "type": "string", 
          "required": true,
          "computed": false
        },
        {
          "name": "maxBeds",
          "type": "number",
          "required": true,
          "computed": false
        },
        {
          "name": "status",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "currentOccupancy",
          "type": "number",
          "required": true,
          "computed": true,
          "computation": {
            "method": "aggregation",
            "description": "Count of beds that are currently occupied",
            "dependencies": ["Bed", "UserBedAssignment"]
          }
        },
        {
          "name": "availableBeds",
          "type": "number",
          "required": true,
          "computed": true,
          "computation": {
            "method": "calculation",
            "description": "maxBeds minus currentOccupancy",
            "dependencies": ["maxBeds", "currentOccupancy"]
          }
        }
      ],
      "referenced_in": ["R001", "R101", "R301", "R501"]
    },
    {
      "name": "Bed",
      "description": "Individual bed spaces within dormitories",
      "properties": [
        {
          "name": "number",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "isOccupied",
          "type": "boolean",
          "required": true,
          "computed": true,
          "computation": {
            "method": "existence_check",
            "description": "True if there is an active UserBedAssignment for this bed",
            "dependencies": ["UserBedAssignment"]
          }
        },
        {
          "name": "status",
          "type": "string",
          "required": true,
          "computed": false
        }
      ],
      "referenced_in": ["R001", "R102", "R103", "R503"],
      "note": "No dormitoryId property - use BedDormitoryRelation instead"
    },
    {
      "name": "BehaviorViolation",
      "description": "Records of student behavior violations and score deductions",
      "properties": [
        {
          "name": "violationType",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "description",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "scoreDeduction",
          "type": "number",
          "required": true,
          "computed": false
        },
        {
          "name": "timestamp",
          "type": "date",
          "required": true,
          "computed": false
        },
        {
          "name": "evidenceUrl",
          "type": "string",
          "required": false,
          "computed": false
        },
        {
          "name": "status",
          "type": "string",
          "required": true,
          "computed": false
        }
      ],
      "referenced_in": ["R002", "R201", "R504", "R505"],
      "note": "No userId or reportedBy properties - use UserViolationRelation and ViolationReporterRelation instead"
    },
    {
      "name": "EvictionRequest",
      "description": "Requests to evict users from dormitories",
      "properties": [
        {
          "name": "reason",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "status",
          "type": "string",
          "required": true,
          "computed": false
        },
        {
          "name": "requestDate",
          "type": "date",
          "required": true,
          "computed": false
        },
        {
          "name": "decisionDate",
          "type": "date",
          "required": false,
          "computed": false
        },
        {
          "name": "adminNotes",
          "type": "string",
          "required": false,
          "computed": false
        },
        {
          "name": "supportingEvidence",
          "type": "string",
          "required": false,
          "computed": false
        }
      ],
      "referenced_in": ["R004", "R401", "R402", "R505"],
      "note": "No targetUserId, requestedBy, or decisionBy properties - use EvictionTargetRelation, EvictionRequesterRelation, and EvictionDeciderRelation instead"
    }
  ],
  "relations": [
    {
      "name": "UserBedAssignment",
      "from": "User",
      "to": "Bed",
      "cardinality": "many-to-one",
      "properties": [
        {
          "name": "assignmentDate",
          "type": "date",
          "required": true
        },
        {
          "name": "status",
          "type": "string",
          "required": true
        },
        {
          "name": "assignedBy",
          "type": "string",
          "required": true
        }
      ],
      "lifecycle": "Created on assignment, updated on status change, archived on removal",
      "referenced_in": ["R102", "R103", "R502"]
    },
    {
      "name": "DormitoryLeadership",
      "from": "User",
      "to": "Dormitory",
      "cardinality": "one-to-one",
      "properties": [
        {
          "name": "assignmentDate",
          "type": "date",
          "required": true
        },
        {
          "name": "status",
          "type": "string",
          "required": true
        },
        {
          "name": "assignedBy",
          "type": "string",
          "required": true
        }
      ],
      "lifecycle": "Created on leader assignment, updated on status change, archived on removal",
      "referenced_in": ["R301", "R302"]
    },
    {
      "name": "BedDormitory",
      "from": "Bed",
      "to": "Dormitory",
      "cardinality": "many-to-one",
      "properties": [
        {
          "name": "createdDate",
          "type": "date",
          "required": true
        }
      ],
      "lifecycle": "Created when bed is added to dormitory, permanent relationship",
      "referenced_in": ["R101"]
    },
    {
      "name": "UserViolationRelation",
      "from": "User",
      "to": "BehaviorViolation",
      "cardinality": "one-to-many",
      "properties": [],
      "lifecycle": "Created when violation is recorded against user",
      "referenced_in": ["R201", "R504"]
    },
    {
      "name": "ViolationReporterRelation",
      "from": "User",
      "to": "BehaviorViolation", 
      "cardinality": "one-to-many",
      "properties": [
        {
          "name": "reporterRole",
          "type": "string",
          "required": true
        }
      ],
      "lifecycle": "Created when user reports a violation",
      "referenced_in": ["R201"]
    },
    {
      "name": "EvictionTargetRelation",
      "from": "User",
      "to": "EvictionRequest",
      "cardinality": "one-to-many",
      "properties": [],
      "lifecycle": "Created when eviction request targets a user",
      "referenced_in": ["R401", "R505"]
    },
    {
      "name": "EvictionRequesterRelation",
      "from": "User",
      "to": "EvictionRequest",
      "cardinality": "one-to-many",
      "properties": [
        {
          "name": "requesterRole",
          "type": "string",
          "required": true
        }
      ],
      "lifecycle": "Created when user submits eviction request",
      "referenced_in": ["R401"]
    },
    {
      "name": "EvictionDeciderRelation",
      "from": "User",
      "to": "EvictionRequest",
      "cardinality": "one-to-many",
      "properties": [
        {
          "name": "decisionRole",
          "type": "string",
          "required": true
        }
      ],
      "lifecycle": "Created when admin makes decision on eviction request",
      "referenced_in": ["R402"]
    }
  ],
  "views": [
    {
      "name": "DormitoryOccupancyView",
      "base_entity": "Dormitory",
      "description": "Dormitories with their current occupancy and availability status",
      "filters": ["status = 'active'"],
      "sorting": "currentOccupancy DESC",
      "referenced_in": ["R001"]
    },
    {
      "name": "UserBehaviorSummaryView", 
      "base_entity": "User",
      "description": "Users with their behavior scores and recent violation counts",
      "filters": ["role = 'student'", "status = 'active'"],
      "sorting": "behaviorScore ASC",
      "referenced_in": ["R002", "R505"]
    },
    {
      "name": "PendingEvictionsView",
      "base_entity": "EvictionRequest",
      "description": "Eviction requests pending administrator review",
      "filters": ["status = 'pending'"],
      "sorting": "requestDate ASC",
      "referenced_in": ["R004"]
    },
    {
      "name": "AvailableBedsView",
      "base_entity": "Bed",
      "description": "Available beds across all active dormitories",
      "filters": ["isOccupied = false", "status = 'active'"],
      "sorting": "number ASC",
      "referenced_in": ["R503"]
    },
    {
      "name": "DormitoryMembersView",
      "base_entity": "User",
      "description": "Users assigned to a specific dormitory with their bed information",
      "filters": ["status = 'active'", "has active UserBedAssignment"],
      "sorting": "name ASC",
      "referenced_in": ["R002", "R201"]
    }
  ]
}