{
  "entities": {
    "User": {
      "purpose": "System users including administrators, dormitory leaders, and residents",
      "dataDependencies": [],
      "computationMethod": "Independently created by CreateUser or Registration interactions",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["CreateUser", "Registration"]
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "soft-delete",
          "deletionInteractions": ["DeleteUser"]
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "controlType": "creation-only",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "username": {
          "type": "string",
          "purpose": "Unique login identifier",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "Registration", "UpdateUsername"],
          "computationMethod": "Direct assignment from interactions with uniqueness validation",
          "initialValue": "Required at creation"
        },
        "password": {
          "type": "string",
          "purpose": "Hashed authentication credential",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "Registration", "ChangePassword"],
          "computationMethod": "Hashed value from interactions",
          "initialValue": "Required at creation"
        },
        "email": {
          "type": "string",
          "purpose": "Contact email address",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "Registration", "UpdateProfile"],
          "computationMethod": "Direct assignment from interactions with format validation",
          "initialValue": "Required at creation"
        },
        "name": {
          "type": "string",
          "purpose": "User's display name",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "Registration", "UpdateProfile"],
          "computationMethod": "Direct assignment from interactions",
          "initialValue": "Required at creation"
        },
        "points": {
          "type": "number",
          "purpose": "Behavior points balance",
          "controlType": "independent",
          "dataDependencies": ["UserPointDeductionsRelation"],
          "interactionDependencies": ["CreateUser", "Registration", "DeductPoints", "DeductResidentPoints"],
          "computationMethod": "Starts at 100, reduced by sum of all PointDeduction.points through UserPointDeductionsRelation",
          "initialValue": 100
        },
        "role": {
          "type": "string",
          "purpose": "User role in the system (admin, dormitoryLeader, resident)",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "Registration", "AssignDormitoryLeader", "RemoveDormitoryLeader", "PromoteToAdmin"],
          "computationMethod": "Direct assignment from interactions, restricted to admin operations",
          "initialValue": "resident"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Account creation timestamp",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "isDeleted": {
          "type": "boolean",
          "purpose": "Soft delete flag",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["DeleteUser", "RestoreUser"],
          "computationMethod": "Set to true by DeleteUser, false by RestoreUser",
          "initialValue": false
        }
      }
    },
    "Dormitory": {
      "purpose": "Student housing units with specific bed capacities",
      "dataDependencies": [],
      "computationMethod": "Independently created by CreateDormitory interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["CreateDormitory"]
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "soft-delete",
          "deletionInteractions": ["DeleteDormitory"]
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "controlType": "creation-only",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "name": {
          "type": "string",
          "purpose": "Dormitory name or identifier",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitory"],
          "computationMethod": "Direct assignment from interactions, admin only",
          "initialValue": "Required at creation"
        },
        "capacity": {
          "type": "number",
          "purpose": "Number of beds in dormitory (4-6)",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitoryCapacity"],
          "computationMethod": "Direct assignment from interactions with range validation (4-6)",
          "initialValue": "Required at creation (4-6)"
        },
        "floor": {
          "type": "number",
          "purpose": "Floor number in building",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitory"],
          "computationMethod": "Direct assignment from interactions, admin only",
          "initialValue": "Required at creation"
        },
        "building": {
          "type": "string",
          "purpose": "Building name or identifier",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitory"],
          "computationMethod": "Direct assignment from interactions, admin only",
          "initialValue": "Required at creation"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Dormitory creation timestamp",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "isDeleted": {
          "type": "boolean",
          "purpose": "Soft delete flag",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["DeleteDormitory", "RestoreDormitory"],
          "computationMethod": "Set to true by DeleteDormitory, false by RestoreDormitory",
          "initialValue": false
        },
        "occupiedBeds": {
          "type": "number",
          "purpose": "Count of currently occupied beds",
          "controlType": "independent",
          "dataDependencies": ["DormitoryBedsRelation", "Bed.isOccupied"],
          "interactionDependencies": [],
          "computationMethod": "Count of Bed through DormitoryBedsRelation where Bed.isOccupied = true",
          "initialValue": 0
        }
      }
    },
    "Bed": {
      "purpose": "Individual bed units within dormitories",
      "dataDependencies": ["Dormitory"],
      "computationMethod": "Created by Dormitory's computation when Dormitory is created (NOT by Bed's own computation)",
      "lifecycle": {
        "creation": {
          "type": "created-with-parent",
          "parent": "Dormitory",
          "creationInteractions": ["CreateDormitory"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "controlType": "creation-only",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "bedNumber": {
          "type": "string",
          "purpose": "Bed identifier within dormitory (e.g., A1, B2)",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Generated based on position when Dormitory creates beds",
          "initialValue": "Auto-generated (A1, A2, B1, B2, etc.)"
        },
        "isOccupied": {
          "type": "boolean",
          "purpose": "Whether bed is currently occupied",
          "controlType": "independent",
          "dataDependencies": ["UserBedRelation"],
          "interactionDependencies": [],
          "computationMethod": "True if UserBedRelation exists for this bed, false otherwise",
          "initialValue": false
        },
        "createdAt": {
          "type": "number",
          "purpose": "Bed creation timestamp",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        }
      }
    },
    "PointDeduction": {
      "purpose": "Audit trail of behavior point deductions",
      "dataDependencies": ["User"],
      "computationMethod": "Independently created by DeductPoints or DeductResidentPoints interactions",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["DeductPoints", "DeductResidentPoints"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "controlType": "creation-only",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "reason": {
          "type": "string",
          "purpose": "Category of violation",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set from interaction payload at creation",
          "initialValue": "Required at creation"
        },
        "points": {
          "type": "number",
          "purpose": "Number of points deducted",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set from interaction payload at creation",
          "initialValue": "Required at creation"
        },
        "description": {
          "type": "string",
          "purpose": "Detailed description of the violation",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set from interaction payload at creation",
          "initialValue": "Required at creation"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Deduction timestamp",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "createdBy": {
          "type": "string",
          "purpose": "Name of admin or dormitory leader who created the deduction",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set from current user at creation",
          "initialValue": "Current user name"
        }
      }
    },
    "RemovalRequest": {
      "purpose": "Requests from dormitory leaders to remove problematic residents",
      "dataDependencies": ["User"],
      "computationMethod": "Independently created by SubmitRemovalRequest interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["SubmitRemovalRequest"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "controlType": "creation-only",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "reason": {
          "type": "string",
          "purpose": "Reason for removal request",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set from interaction payload at creation",
          "initialValue": "Required at creation"
        },
        "status": {
          "type": "string",
          "purpose": "Request status (pending, approved, rejected)",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["SubmitRemovalRequest", "ProcessRemovalRequest"],
          "computationMethod": "Set to 'pending' at creation, updated to 'approved' or 'rejected' by ProcessRemovalRequest",
          "initialValue": "pending"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Request creation timestamp",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "processedAt": {
          "type": "number",
          "purpose": "Timestamp when request was processed",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set to current timestamp when ProcessRemovalRequest is executed",
          "initialValue": null
        },
        "adminComment": {
          "type": "string",
          "purpose": "Admin's comment on the decision",
          "controlType": "independent",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set from ProcessRemovalRequest payload",
          "initialValue": null
        }
      }
    }
  },
  "relations": {
    "UserDormitoryLeaderRelation": {
      "type": "1:1",
      "purpose": "Links dormitory leaders to the dormitories they manage",
      "sourceEntity": "User",
      "targetEntity": "Dormitory",
      "sourceProperty": "managedDormitory",
      "targetProperty": "dormitoryLeader",
      "dataDependencies": ["User", "Dormitory"],
      "computationMethod": "Independently created by AssignDormitoryLeader interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["AssignDormitoryLeader"]
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "hard-delete",
          "deletionInteractions": ["RemoveDormitoryLeader", "ProcessRemovalRequest"]
        }
      },
      "properties": {
        "assignedAt": {
          "type": "number",
          "purpose": "Timestamp when leader was assigned",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        }
      }
    },
    "DormitoryBedsRelation": {
      "type": "1:n",
      "purpose": "Links dormitories to their beds",
      "sourceEntity": "Dormitory",
      "targetEntity": "Bed",
      "sourceProperty": "beds",
      "targetProperty": "dormitory",
      "dataDependencies": ["Dormitory", "Bed"],
      "computationMethod": "Created together with Bed entities by Dormitory's computation when Dormitory is created",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "Dormitory",
          "creationInteractions": ["CreateDormitory"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "UserBedRelation": {
      "type": "1:1",
      "purpose": "Links users to their assigned beds",
      "sourceEntity": "User",
      "targetEntity": "Bed",
      "sourceProperty": "bed",
      "targetProperty": "occupant",
      "dataDependencies": ["User", "Bed"],
      "computationMethod": "Independently created by AssignUserToBed interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null,
          "creationInteractions": ["AssignUserToBed"]
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "hard-delete",
          "deletionInteractions": ["RemoveUserFromBed", "ProcessRemovalRequest"]
        }
      },
      "properties": {
        "assignedAt": {
          "type": "number",
          "purpose": "Timestamp when user was assigned to bed",
          "controlType": "creation-only",
          "dataDependencies": [],
          "interactionDependencies": [],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        }
      }
    },
    "UserPointDeductionsRelation": {
      "type": "1:n",
      "purpose": "Links users to their point deduction records",
      "sourceEntity": "User",
      "targetEntity": "PointDeduction",
      "sourceProperty": "pointDeductions",
      "targetProperty": "user",
      "dataDependencies": ["User", "PointDeduction"],
      "computationMethod": "Created together with PointDeduction entity by PointDeduction's creation interactions",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "PointDeduction",
          "creationInteractions": ["DeductPoints", "DeductResidentPoints"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "UserRemovalRequestsRelation": {
      "type": "1:n",
      "purpose": "Links users to removal requests targeting them",
      "sourceEntity": "User",
      "targetEntity": "RemovalRequest",
      "sourceProperty": "removalRequests",
      "targetProperty": "targetUser",
      "dataDependencies": ["User", "RemovalRequest"],
      "computationMethod": "Created together with RemovalRequest entity by RemovalRequest's creation interactions",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "RemovalRequest",
          "creationInteractions": ["SubmitRemovalRequest"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "DormitoryLeaderRemovalRequestsRelation": {
      "type": "1:n",
      "purpose": "Links dormitory leaders to removal requests they submitted",
      "sourceEntity": "User",
      "targetEntity": "RemovalRequest",
      "sourceProperty": "submittedRemovalRequests",
      "targetProperty": "requestedBy",
      "dataDependencies": ["User", "RemovalRequest"],
      "computationMethod": "Created together with RemovalRequest entity by RemovalRequest's creation interactions",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "RemovalRequest",
          "creationInteractions": ["SubmitRemovalRequest"]
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    }
  },
  "dictionaries": {
    "totalUsers": {
      "purpose": "Track total number of users in the system",
      "type": "number",
      "dataDependencies": ["User"],
      "interactionDependencies": [],
      "computationMethod": "Count of all User entities where isDeleted = false"
    },
    "totalDormitories": {
      "purpose": "Track total number of active dormitories",
      "type": "number",
      "dataDependencies": ["Dormitory"],
      "interactionDependencies": [],
      "computationMethod": "Count of all Dormitory entities where isDeleted = false"
    },
    "totalOccupiedBeds": {
      "purpose": "Track total number of occupied beds across all dormitories",
      "type": "number",
      "dataDependencies": ["Bed", "Bed.isOccupied"],
      "interactionDependencies": [],
      "computationMethod": "Count of all Bed entities where isOccupied = true"
    },
    "totalAvailableBeds": {
      "purpose": "Track total number of available beds across all dormitories",
      "type": "number",
      "dataDependencies": ["Bed", "Bed.isOccupied"],
      "interactionDependencies": [],
      "computationMethod": "Count of all Bed entities where isOccupied = false"
    },
    "pendingRemovalRequests": {
      "purpose": "Track number of pending removal requests",
      "type": "number",
      "dataDependencies": ["RemovalRequest", "RemovalRequest.status"],
      "interactionDependencies": [],
      "computationMethod": "Count of all RemovalRequest entities where status = 'pending'"
    }
  }
}