{
  "entities": {
    "User": {
      "purpose": "Represents all system users including administrators, dormitory heads, and regular residents",
      "dataDependencies": [],
      "interactionDependencies": ["CreateUser", "AssignDormitoryHead"],
      "computationMethod": "Independently created by CreateUser interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "soft-delete",
          "deletionInteractions": ["DeleteUser"]
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "name": {
          "type": "string",
          "purpose": "User's display name",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "UpdateUserProfile"],
          "computationMethod": "Direct assignment from interactions",
          "initialValue": "Required at creation"
        },
        "email": {
          "type": "string",
          "purpose": "User's email for authentication and contact",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "UpdateUserEmail"],
          "computationMethod": "Set at creation, modifiable with restrictions via UpdateUserEmail",
          "initialValue": "Required at creation"
        },
        "isAdmin": {
          "type": "boolean",
          "purpose": "Whether user has admin privileges",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "PromoteToAdmin", "DemoteFromAdmin"],
          "computationMethod": "Set at creation, can be modified by admin interactions",
          "initialValue": "false"
        },
        "points": {
          "type": "number",
          "purpose": "Behavior monitoring points",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "DeductPoints"],
          "computationMethod": "Set to 100 at creation, decremented by DeductPoints interaction",
          "initialValue": "100"
        },
        "totalDeductions": {
          "type": "number",
          "purpose": "Sum of all point deductions",
          "dataDependencies": ["UserPointDeductionRelation.points"],
          "interactionDependencies": [],
          "computationMethod": "Summation of points across all UserPointDeductionRelation",
          "initialValue": "0"
        },
        "isRemovable": {
          "type": "boolean",
          "purpose": "Whether user can be requested for removal",
          "dataDependencies": ["points"],
          "interactionDependencies": [],
          "computationMethod": "Computed as points <= 20",
          "initialValue": "false"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Timestamp of account creation",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "updatedAt": {
          "type": "number",
          "purpose": "Timestamp of last modification",
          "dataDependencies": [],
          "interactionDependencies": ["CreateUser", "UpdateUserProfile", "UpdateUserEmail", "DeductPoints"],
          "computationMethod": "Updated to current timestamp on any modification",
          "initialValue": "Current timestamp"
        }
      }
    },
    "Dormitory": {
      "purpose": "Represents individual dormitory units with configurable bed capacity",
      "dataDependencies": [],
      "interactionDependencies": ["CreateDormitory"],
      "computationMethod": "Independently created by CreateDormitory interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "soft-delete",
          "deletionInteractions": ["DeleteDormitory"]
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "name": {
          "type": "string",
          "purpose": "Dormitory identifier/name",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitoryName"],
          "computationMethod": "Direct assignment from interactions",
          "initialValue": "Required at creation"
        },
        "bedCount": {
          "type": "number",
          "purpose": "Number of beds in the dormitory (4-6)",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitoryCapacity"],
          "computationMethod": "Set at creation (4-6), can be modified only when dormitory is empty",
          "initialValue": "Required at creation (4-6)"
        },
        "occupancy": {
          "type": "number",
          "purpose": "Count of active bed assignments",
          "dataDependencies": ["DormitoryBedAssignmentRelation"],
          "interactionDependencies": [],
          "computationMethod": "Count of DormitoryBedAssignmentRelation where BedAssignment.removedAt is null",
          "initialValue": "0"
        },
        "availableBeds": {
          "type": "number",
          "purpose": "Number of available beds",
          "dataDependencies": ["bedCount", "occupancy"],
          "interactionDependencies": [],
          "computationMethod": "Custom: bedCount - occupancy",
          "initialValue": "Equal to bedCount"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Timestamp of dormitory creation",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "updatedAt": {
          "type": "number",
          "purpose": "Timestamp of last modification",
          "dataDependencies": [],
          "interactionDependencies": ["CreateDormitory", "UpdateDormitoryName", "UpdateDormitoryCapacity"],
          "computationMethod": "Updated to current timestamp on any modification",
          "initialValue": "Current timestamp"
        }
      }
    },
    "BedAssignment": {
      "purpose": "Tracks the assignment of users to specific dormitory beds",
      "dataDependencies": [],
      "interactionDependencies": ["AssignUserToBed"],
      "computationMethod": "Independently created by AssignUserToBed interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "bedNumber": {
          "type": "number",
          "purpose": "Assigned bed position (1-6)",
          "dataDependencies": [],
          "interactionDependencies": ["AssignUserToBed"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation (1-6)"
        },
        "assignedAt": {
          "type": "number",
          "purpose": "Timestamp of bed assignment",
          "dataDependencies": [],
          "interactionDependencies": ["AssignUserToBed"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "removedAt": {
          "type": "number",
          "purpose": "Timestamp when user was removed from bed",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest", "RemoveUserFromBed"],
          "computationMethod": "Set to current timestamp when user is removed",
          "initialValue": "null"
        }
      }
    },
    "PointDeduction": {
      "purpose": "Records behavioral infractions and associated point penalties",
      "dataDependencies": [],
      "interactionDependencies": ["DeductPoints"],
      "computationMethod": "Independently created by DeductPoints interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "reason": {
          "type": "string",
          "purpose": "Description of infraction",
          "dataDependencies": [],
          "interactionDependencies": ["DeductPoints"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation"
        },
        "points": {
          "type": "number",
          "purpose": "Points deducted",
          "dataDependencies": [],
          "interactionDependencies": ["DeductPoints"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Timestamp of deduction",
          "dataDependencies": [],
          "interactionDependencies": ["DeductPoints"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        }
      }
    },
    "RemovalRequest": {
      "purpose": "Tracks dormitory head requests to remove residents",
      "dataDependencies": [],
      "interactionDependencies": ["RequestUserRemoval"],
      "computationMethod": "Independently created by RequestUserRemoval interaction",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "reason": {
          "type": "string",
          "purpose": "Justification for removal",
          "dataDependencies": [],
          "interactionDependencies": ["RequestUserRemoval"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation"
        },
        "status": {
          "type": "string",
          "purpose": "Request status (pending/approved/rejected)",
          "dataDependencies": [],
          "interactionDependencies": ["RequestUserRemoval", "ProcessRemovalRequest"],
          "computationMethod": "Set to 'pending' at creation, updated to 'approved' or 'rejected' by ProcessRemovalRequest",
          "initialValue": "pending"
        },
        "isPending": {
          "type": "boolean",
          "purpose": "Whether request is still pending",
          "dataDependencies": ["status"],
          "interactionDependencies": [],
          "computationMethod": "Computed as status === 'pending'",
          "initialValue": "true"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Timestamp of request creation",
          "dataDependencies": [],
          "interactionDependencies": ["RequestUserRemoval"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        },
        "processedAt": {
          "type": "number",
          "purpose": "Timestamp when admin processed request",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set to current timestamp when processed",
          "initialValue": "null"
        }
      }
    },
    "AdminComment": {
      "purpose": "Admin's feedback when processing removal requests",
      "dataDependencies": ["RemovalRequest"],
      "interactionDependencies": ["ProcessRemovalRequest"],
      "computationMethod": "Created by RemovalRequest's computation when ProcessRemovalRequest is executed",
      "lifecycle": {
        "creation": {
          "type": "created-with-parent",
          "parent": "RemovalRequest"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {
        "id": {
          "type": "string",
          "purpose": "System-generated unique identifier",
          "dataDependencies": null,
          "interactionDependencies": null,
          "initialValue": "auto-generated"
        },
        "comment": {
          "type": "string",
          "purpose": "Admin's decision rationale",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation"
        },
        "decision": {
          "type": "string",
          "purpose": "Admin's decision (approved/rejected)",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set at creation, immutable thereafter",
          "initialValue": "Required at creation"
        },
        "createdAt": {
          "type": "number",
          "purpose": "Timestamp of comment creation",
          "dataDependencies": [],
          "interactionDependencies": ["ProcessRemovalRequest"],
          "computationMethod": "Set to current timestamp at creation",
          "initialValue": "Current timestamp"
        }
      }
    }
  },
  "relations": {
    "DormitoryHeadRelation": {
      "type": "1:1",
      "purpose": "Links dormitory to its head user",
      "sourceEntity": "Dormitory",
      "targetEntity": "User",
      "sourceProperty": "dormHead",
      "targetProperty": "headOfDormitory",
      "dataDependencies": ["Dormitory", "User"],
      "interactionDependencies": ["AssignDormitoryHead", "RemoveDormitoryHead"],
      "computationMethod": "Independently created by AssignDormitoryHead, removed by RemoveDormitoryHead",
      "lifecycle": {
        "creation": {
          "type": "interaction-created",
          "parent": null
        },
        "deletion": {
          "canBeDeleted": true,
          "deletionType": "hard-delete",
          "deletionInteractions": ["RemoveDormitoryHead", "AssignDormitoryHead"]
        }
      },
      "properties": {
        "assignedAt": {
          "type": "number",
          "purpose": "Timestamp of head assignment",
          "dataDependencies": [],
          "interactionDependencies": ["AssignDormitoryHead"],
          "computationMethod": "Set to current timestamp when created",
          "initialValue": "Current timestamp"
        }
      }
    },
    "UserBedAssignmentRelation": {
      "type": "1:1",
      "purpose": "Links user to their current bed assignment",
      "sourceEntity": "User",
      "targetEntity": "BedAssignment",
      "sourceProperty": "bedAssignment",
      "targetProperty": "user",
      "dataDependencies": ["User", "BedAssignment"],
      "interactionDependencies": ["AssignUserToBed"],
      "computationMethod": "Created together with BedAssignment by AssignUserToBed interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "BedAssignment"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "DormitoryBedAssignmentRelation": {
      "type": "1:n",
      "purpose": "Links dormitory to all its bed assignments",
      "sourceEntity": "Dormitory",
      "targetEntity": "BedAssignment",
      "sourceProperty": "bedAssignments",
      "targetProperty": "dormitory",
      "dataDependencies": ["Dormitory", "BedAssignment"],
      "interactionDependencies": ["AssignUserToBed"],
      "computationMethod": "Created together with BedAssignment by AssignUserToBed interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "BedAssignment"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "UserPointDeductionRelation": {
      "type": "1:n",
      "purpose": "Links user to their point deduction history",
      "sourceEntity": "User",
      "targetEntity": "PointDeduction",
      "sourceProperty": "pointDeductions",
      "targetProperty": "user",
      "dataDependencies": ["User", "PointDeduction"],
      "interactionDependencies": ["DeductPoints"],
      "computationMethod": "Created together with PointDeduction by DeductPoints interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "PointDeduction"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "CreatorPointDeductionRelation": {
      "type": "1:n",
      "purpose": "Links admin/dorm head to deductions they created",
      "sourceEntity": "User",
      "targetEntity": "PointDeduction",
      "sourceProperty": "createdDeductions",
      "targetProperty": "createdBy",
      "dataDependencies": ["User", "PointDeduction"],
      "interactionDependencies": ["DeductPoints"],
      "computationMethod": "Created together with PointDeduction by DeductPoints interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "PointDeduction"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "RemovalRequestUserRelation": {
      "type": "1:n",
      "purpose": "Links resident to removal requests about them",
      "sourceEntity": "User",
      "targetEntity": "RemovalRequest",
      "sourceProperty": "removalRequests",
      "targetProperty": "targetUser",
      "dataDependencies": ["User", "RemovalRequest"],
      "interactionDependencies": ["RequestUserRemoval"],
      "computationMethod": "Created together with RemovalRequest by RequestUserRemoval interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "RemovalRequest"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "RemovalRequestCreatorRelation": {
      "type": "1:n",
      "purpose": "Links dormitory head to removal requests they created",
      "sourceEntity": "User",
      "targetEntity": "RemovalRequest",
      "sourceProperty": "createdRemovalRequests",
      "targetProperty": "requestedBy",
      "dataDependencies": ["User", "RemovalRequest"],
      "interactionDependencies": ["RequestUserRemoval"],
      "computationMethod": "Created together with RemovalRequest by RequestUserRemoval interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "RemovalRequest"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "RemovalRequestDormitoryRelation": {
      "type": "1:n",
      "purpose": "Links dormitory to all removal requests",
      "sourceEntity": "Dormitory",
      "targetEntity": "RemovalRequest",
      "sourceProperty": "removalRequests",
      "targetProperty": "dormitory",
      "dataDependencies": ["Dormitory", "RemovalRequest"],
      "interactionDependencies": ["RequestUserRemoval"],
      "computationMethod": "Created together with RemovalRequest by RequestUserRemoval interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "RemovalRequest"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "RemovalRequestAdminCommentRelation": {
      "type": "1:1",
      "purpose": "Links removal request to admin's comment",
      "sourceEntity": "RemovalRequest",
      "targetEntity": "AdminComment",
      "sourceProperty": "adminComment",
      "targetProperty": "removalRequest",
      "dataDependencies": ["RemovalRequest", "AdminComment"],
      "interactionDependencies": ["ProcessRemovalRequest"],
      "computationMethod": "Created together with AdminComment by ProcessRemovalRequest interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "AdminComment"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    },
    "AdminCommentAuthorRelation": {
      "type": "1:n",
      "purpose": "Links admin to comments they wrote",
      "sourceEntity": "User",
      "targetEntity": "AdminComment",
      "sourceProperty": "adminComments",
      "targetProperty": "author",
      "dataDependencies": ["User", "AdminComment"],
      "interactionDependencies": ["ProcessRemovalRequest"],
      "computationMethod": "Created together with AdminComment by ProcessRemovalRequest interaction",
      "lifecycle": {
        "creation": {
          "type": "created-with-entity",
          "parent": "AdminComment"
        },
        "deletion": {
          "canBeDeleted": false,
          "deletionType": "none",
          "deletionInteractions": []
        }
      },
      "properties": {}
    }
  },
  "dictionaries": {
    "totalUsers": {
      "purpose": "Track total number of users in the system",
      "type": "number",
      "dataDependencies": [],
      "interactionDependencies": ["CreateUser", "DeleteUser"],
      "computationMethod": "Incremented by 1 on CreateUser, decremented by 1 on DeleteUser"
    },
    "totalDormitories": {
      "purpose": "Track total number of dormitories",
      "type": "number",
      "dataDependencies": [],
      "interactionDependencies": ["CreateDormitory", "DeleteDormitory"],
      "computationMethod": "Incremented by 1 on CreateDormitory, decremented by 1 on DeleteDormitory"
    },
    "totalActiveAssignments": {
      "purpose": "Total number of active bed assignments",
      "type": "number",
      "dataDependencies": ["BedAssignment.removedAt"],
      "interactionDependencies": [],
      "computationMethod": "Count of BedAssignment where removedAt is null"
    }
  }
}